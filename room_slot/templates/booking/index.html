{% extends 'base/base.html' %}
{%load static %}
{%block content%}

<link href="https://fonts.googleapis.com/css?family=Pacifico&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah&display=swap" rel="stylesheet"> 
<link href="https://fonts.googleapis.com/css?family=Rye&display=swap" rel="stylesheet">


<div class="container">
    <div class="col-md-12 text-center">
        <h4 class="fw-bold text-primary" style="margin: 4rem 0 4% 0;font-size:4rem">Looking for a room?</h4>
    </div>
    <div class="row">
        <div class="col-md-5 offset-md-1">
            <div class="input-group mb-3">
                <input type="date" class="form-control datepicker-start" id="start1">
                <label for="start1" class="form-label text-info fw-bold">Start Date</label>
            </div>
        </div>
        <div class="col-md-5">
            <div class="input-group mb-3">
                <input type="date" class="form-control datepicker-end" id="end1">
                <label for="end1" class="form-label text-info fw-bold">End Date</label>
            </div>
        </div>
        <div class="col-md-12 text-center">
            <a type="button" class="btn btn-success text-white fw-bold" href="" id="show_me_rooms">Show me Rooms</a>
        </div>
    </div>
</div>
<div class="divider"></div>

<div class="container mt-3">
    <h3 class="text-center mb-5 mt-5">Services For You</h3>
    <div class="row">
        <div class="col-md-2">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <i class="material-icons">local_airport</i><br>
                    Airport Pick and Drop
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <i class="material-icons">free_breakfast</i><br>
                    Free Breakfast
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <i class="material-icons">wifi</i><br>
                    Free 10G Wifi
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <i class="material-icons">live_tv</i><br>
                    Smart Tv FlatScreen
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <i class="material-icons">restaurant</i><br>
                    7/11 Local Restaurant
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="card bg-primary text-white">
                <div class="card-body text-center">
                    <i class="material-icons">accessibility</i><br>
                    Free Gymnasium
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container mt-5">
    <h3 class="text-center mb-5 mt-5">Room for Every Size & Need</h3>
    <div class="row">
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card">
                <div class="card-image">
                    <img src="{% static 'christopher-jolly-GqbU78bdJFM-unsplash.jpg'%}" alt="" class="card-img-top" width="300" height="400">
                    <a class="btn btn-floating btn-large halfway-fab waves-effect waves-light red white-text" style="font-size:0.8rem">&#8369; 1000</a>
                </div>
                <div class="card-content">
                    <span class="card-title brown-text">
                        Single Bed Room
                    </span>
                </div>
            </div>
            {% csrf_token %}
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card">
                <div class="card-image">
                    <img src="{% static 'stephen-leonardi--TsLaYk1DLM-unsplash.jpg'%}" alt="" class="card-img-top" width="300" height="400">
                    <a class="btn btn-floating btn-large halfway-fab waves-effect waves-light red white-text" style="font-size:0.8rem">&#8369; 1700</a>
                </div>
                <div class="card-content">
                    <span class="card-title brown-text">Double Bed Room</span>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card">
                <div class="card-image">
                    <img src="{% static 'ralph-kayden-FqqiAvJejto-unsplash.jpg'%}" alt="" class="card-img-top" width="300" height="400">
                    <a class="btn btn-floating btn-large halfway-fab waves-effect waves-light red white-text" style="font-size:0.8rem">&#8369; 1000</a>
                </div>
                <div class="card-content">
                    <span class="card-title brown-text">King-sized Bed Room</span>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card">
                <div class="card-image">
                    <img src="{% static 'roberto-nickson-EeeKjwm2vDo-unsplash.jpg'%}" alt="" class="card-img-top" width="300" height="400">
                    <a class="btn btn-floating btn-large halfway-fab waves-effect waves-light red white-text" style="font-size:0.8rem">&#8369; 2500</a>
                </div>
                <div class="card-content">
                    <span class="card-title brown-text">Room with View</span>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card">
                <div class="card-image">
                    <img src="{% static 'keytion-7LR0xIBbUUI-unsplash.jpg'%}" alt="" class="card-img-top" width="300" height="400">
                    <a class="btn btn-floating btn-large halfway-fab waves-effect waves-light red white-text" style="font-size:0.8rem">&#8369; 2000</a>
                </div>
                <div class="card-content">
                    <span class="card-title brown-text">Double room with working tables</span>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card">
                <div class="card-image">
                    <img src="{% static 'dan-ramsay-_hDFophEkyM-unsplash.jpg'%}" alt="" class="card-img-top" width="300" height="400">
                    <a class="btn btn-floating btn-large halfway-fab waves-effect waves-light red white-text" style="font-size:0.8rem">&#8369; 5000</a>
                </div>
                <div class="card-content">
                    <span class="card-title brown-text">Sea facing rooms</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Accept datepicker-start or datepicker-end, as we need to initialize both anyway.
$("input[class*='datepicker-']").pickadate({
  selectMonths: false,
  selectYears: 1,
  format: 'dd/mmm/yyyy',
  onSet: function(obj){
    let thisPicker = $(this)[0].$node;

    // Check if this is the start date
    let classes = thisPicker.attr("class");
    if (classes === undefined || classes.length === 0 || classes.indexOf("datepicker-start") < 0){
      return;
    }

    // .datepicker-start must be wrapped in a div.input-field element (in this example), and
    // .datepicker-end must be in the next div.input-field.  Change selectors for your conditions.
    let parent1 = thisPicker.closest("div.input-field");    // This picker's parent
    let parent2 = parent1.next("div.input-field");          // Next picker's parent
    let picker2 = parent2.find(".datepicker-end");          // Matching 'end' picker
    
    // Set end picker minimum date, or whatever you need.
    if(obj.select){
      let dt = new Date(obj.select);
      picker2.pickadate('picker').set('min', dt);
    }
    if(obj.hasOwnProperty('clear')){
      picker2.pickadate('picker').set('min', false);
    }
  }
});
</script>
<script>
const room_btn=document.getElementById("show_me_rooms")
room_btn.addEventListener("click",(e)=>
{
e.preventDefault()
startDate=$('.datepicker-start').val();
endDate=$('.datepicker-end').val();
//d = new Date(endDate);    
sd=new Date(startDate)
td=new Date()
if (sd<td || startDate.length==0 || endDate.length==0)
{
alert("Please choose a valid date")
}
else
{
     var form = document.createElement("form");
    var element1 = document.createElement("input"); 
    var element2 = document.createElement("input");  
    var element3= document.createElement("input");  

    form.method = "POST";
    form.action = "/book";   
    
    element1.name="start_date";
    element1.type="text"
    element1.value=startDate;
    form.appendChild(element1);  

    element2.name="end_date";
    element2.type="text"
    element2.value=endDate;
    form.appendChild(element2);  
    element3.value='{{csrf_token}}';
    element3.name="csrfmiddlewaretoken";
    element3.type="hidden"
    form.appendChild(element3);  
    document.body.appendChild(form);
   form.submit(); 
}
})
</script>
{% endblock %}